<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Repositorios institucionales</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
          integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
</head>
<body>
<div id="visibility-content" class="content">
    <div class="title">
        <div>
            Visibilidad
        </div>
        <div class="title__number">
            1
        </div>
    </div>
    <div id="visibility" class="row">
    <form id="repositoryData">
        <div class="input-wrapper">
            <label>Nombre repositorio</label>
            <input class="input custom-input" name="name" type="text" placeholder="Nombre del repositorio">
        </div>
        <div class="input-wrapper">
            <label>Enlace repositorio</label>
            <input class="input custom-input" name="link" type="text" placeholder="Enlace del repositorio">
        </div>
        <button class="next-btn submit" type="submit">
            Evaluar
        </button>
    </form>
        <div>
            <p>Presencia en recolectores nacionales</p>
            (SNRD - BDU2)
            <div class="control">
                <label class="radio">
                    <input type="radio" name="total">
                    Sí (total)
                </label>
                <label class="radio">
                    <input type="radio" name="partial">
                    Sí (parcial)
                </label>
                <label class="radio">
                    <input type="radio" name="no">
                    No
                </label>
            </div>
        </div>
    </div>
    <button class="next-btn" onclick="openPolicy()">
        Continuar
    </button>
</div>
<div id="policy-content" class="content hide">
    <div class="title">
        <div>
            Políticas
        </div>
        <div class="title__number">
            2
        </div>
    </div>
    <form id="policy-data">
        <div id="policy" class="columns is-multiline">
        </div>
        <button class="next-btn">
            Finalizar
        </button>
    </form>
</div>
</body>
<script
  src="https://code.jquery.com/jquery-3.6.0.js"
  integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
  crossorigin="anonymous"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/policyOptions.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/visibilityOptions.js') }}"></script>
<script>
    policyVisibility();

    $(function () {
        $('#repositoryData').on('submit', function (event) {
            event.preventDefault();
            console.log($('#repositoryData').serialize())
        })
    })

    function openPolicy() {
        $('#visibility-content').addClass('hide');
        $('#policy-content').removeClass('hide');
    }

    function policyVisibility() {
        policyOptions.forEach(item => {
            const $option = $("<div class='column is-half option-card'></div>");
            const title = `<p>${item.topic}</p>`;
            $option.append(title);

            const $options = $("<div class='control'></div>");
            item.options.forEach(opt => {
                const radio = `
                    <label class="radio">
                        <input type="radio" name="${opt.id}" value="${opt.value}"> ${opt.label}
                    </label>`;
                $options.append(radio);
            });

            $option.append($options);
            $('#policy').append($option);

        })
    }

    $(function () {
        $('#policy-data').on('submit', function (event) {
            event.preventDefault();
            console.log($('#policy-data').serialize())
        })
    })

</script>
</html>